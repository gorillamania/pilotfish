/* Pilotfish unstuck plugin, see https://github.com/pilotfish/pilotfish/blob/master/plugins/unstuck
* Copyright (c) 2012 Nick Sullivan, MIT license https://github.com/pilotfish/pilotfish/blob/master/LICENSE */
Pilotfish("registerPlugin","unstuck",function(e){function r(n){e.trackEvents&&Pilotfish("track",t.eventPrefix+":"+n),Pilotfish("trigger",t.eventPrefix,{name:n,target:i(a())})}function i(e){return e.outerHTML}function s(e){return jQuery(e).css("cursor")==="pointer"}function o(){return n.length===0?null:n[n.length-1].pointer}function u(){if(n.length===0)return null;var t=(new Date).getTime();return t-n[n.length-1].when<e.clickRecency}function a(){return n.length===0?null:n[n.length-1].target}var t={version:"0.2.0",name:"unstuck",eventPrefix:"plugins:unstuck",defaults:{trackEvents:!0,clickRecency:50,hash_change_no_pointer:!0,url_change_no_pointer:!0}};e=Pilotfish("extend",t.defaults,e),e.url_change_no_pointer&&Pilotfish("on",window,"unload",function(e){o()===!1&&u()===!0&&r("url_change_no_pointer")}),e.hash_change_no_pointer&&Pilotfish("on","window:hashchange",function(e){o()===!1&&u()===!0&&r("hash_change_no_pointer")});var n=[];return jQuery(document).click(function(e){n.push({when:(new Date).getTime(),target:e.target,pointer:s(e.target)}),n.length>5&&n.shift()}),!0});