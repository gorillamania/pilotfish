/* Pilotfish, a toolkit for improving user experience, v0.5.0 http://pilotfish.io
Copyright (c) 2012 Nick Sullivan, MIT license https://github.com/pilotfish/pilotfish/blob/master/LICENSE */
(function(e,t,n,r){function v(){return e.JSON?e.jQuery?!0:!1:!1}function m(){var e=p;p=[];for(var t=0,n=e.length;t<n;t++)d.apply(d,e[t])==f&&p.push(e[t])}function N(e){return jQuery.isPlainObject(e)}function C(e){return typeof e=="function"}if(e.Pilotfish&&e.Pilotfish.version)return;var i={},s=[],o={},u={},a={},f="MISSING",l=v(),c=n.protocol=="https:",h=c?"//pilotfish.github.com/":"http://cdn.pilotfish.io/",p=e.Pilotfish&&e.Pilotfish.q||[],d=function(){if(!arguments.length)return!0;if(!l)return!0;var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return C(d[e])?d[e].apply(d,t):C(i[e])?i[e].apply(d,t):C(u[e])?u[e].apply(d,t):f};e.Pilotfish=d,d.version="0.5.0",d.cdnHost=h,d.compatible=l;var g=i.on=function(){typeof arguments[0]=="string"?jQuery(d).on(arguments[0],arguments[1]):typeof arguments[0]=="object"&&jQuery(arguments[0]).on(arguments[1],arguments[2])},y=i.off=function(){typeof arguments[0]=="string"?jQuery(d).off(arguments[0],arguments[1]):typeof arguments[0]=="object"&&jQuery(arguments[0]).off(arguments[1])},b=i.trigger=function(){typeof arguments[0]=="string"?(jQuery(d).trigger(arguments[0],arguments[1]||{}),w({name:arguments[0],args:arguments})):typeof arguments[0]=="object"&&(jQuery(arguments[0]).trigger(arguments[1]),w({name:arguments[1],args:arguments}))},w=i.eventLog=function(e){return e&&s.push(e),s},E=i.onready=function(e){jQuery(t).ready(e)},S=i.onload=function(t){jQuery(e).load(t)},x=i.extend=function(e,t){return jQuery.extend(e,t)},T=i.error=function(e,t){b("error",{type:t,error:e}),t&&b("error:"+t,{error:e})},k=i.loadScript=function(e,n){var r="external_script:";b(r+"started",{src:e});var i="script",s=t.getElementsByTagName(i)[0],o=t.createElement(i);o.async=!0,o.src=e,o.onload=function(){o.done||(o.done=!0,b(r+"loaded",{src:e}),C(n)&&n())},o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&!o.done&&(o.done=!0,b(r+"loaded",{src:e}),C(n)&&n())},s.parentNode.insertBefore(o,s)},L=i.registerPlugin=function(e,t){u[e]=t},A=i.requirePlugin=function(e,t){if(O(e))return;t=t||[h,"client/plugins/",e,"/pilotfish-",e,".min.js"].join(""),k(t,function(){b("plugin:loaded",{plugin:e})})};d("on","plugin:loaded",m);var O=i.hasPlugin=function(e){return C(u[e])},M=i.log=function(t){b("log",{msg:t}),e.console&&e.console.log.apply(e.console,arguments)},_=i.pageData=function(e,t){return t!==r&&(o[e]=H(t)),o[e]||""},D=i.setting=function(e,t){return t!==r&&(a[e]=H(t)),a[e]||""},P=i.S=function(e){return jQuery(e)},H=i.toS=function(e){return e===r||e===null||typeof e=="number"&&isNaN(e)?"":typeof e=="object"?JSON.stringify(e):""+e};(function(){var r;e.jQuery&&jQuery(e).bind("hashchange",function(){var e=n.hash.substring(1);e!==r&&(b("window:hashchange",{path:e}),r=e)}),m()})()})(window,document,location);